
// Adding Stock - Common Modal
var addStock = function (event) {
    var name = $("#symbol").val();
    var shares = parseInt($("#numShares").val());
    var price = parseFloat($("#price").val());
    if (name.length <= 6 && typeof (name) === "string" && typeof (shares) === "number" && typeof (price) === "number") {
        FreshFace.addStock(name.toUpperCase(), shares, price);
    } else {
        alert("Error: Invalid Entry");
    }

    $("#stockModal").trigger("reveal:close");
    event.preventDefault();
};
$(".addStocks").click(function (event) {
    addStock(event);
});
var onStockKey = function (event) {
    // On enter key
    if (event.keyCode == 13) {
        addStock(event);
    }
};
$("#symbol").keyup(onStockKey);
$("#numShares").keyup(onStockKey);
$("#price").keyup(onStockKey);
// Adding Stock

// Adding Friend - Common Modal
var fbAddFriend = function (username) {
    FB.ui({ method: 'friends.add', id: username, display: 'popup' });
}
var addFriend = function (event) {
    event.preventDefault();
    $("#friendModal").trigger("reveal:close");
    var friend = $("#friend").val();
    fbAddFriend(friend);
};
$(".addFriend").click(function (event) {
    addFriend(event);
});
var onFriendKey = function (event) {
    // On enter key
    if (event.keyCode == 13) {
        addFriend(event);
    }
};
$("#friend").keyup(onFriendKey);
// Adding Friend

// Adding Photo - Common Modal
$(".addPhoto").click(function (event) {
    //var album = $(".photo_album").val();
    var photo = $(".photo_url").val();
    var data = {
        url: photo
    };
    //Debug.log($("#photoForm").serialize());
    FB.api("/me/photos", "post", data, function (resp) {
        Debug.log("Posted photo, resp:");
        Debug.log(resp);

        FB.api('/' + resp.id, function (postData) {
            Debug.log("And the data is...");
            Debug.log(postData);

            FreshFace.prependPost($(".ff-feed-parent"), postData, "photo");

            $("#photoModal").trigger("reveal:close");
        });
    });
    event.preventDefault();
});
// Adding Photo